{{- $specs := partialCached "reports/questionnaire-specs" (dict "questionnaireId" $.Page.Params.id) $.Page.Params.id }}
{{- $first := .Get "first" | int }}
{{- $after := .Get "after" | int }}
<table id="table-answers" class="w-full apa-table">
  <caption class="caption">
    {{ T "reportItemLatency" | strings.FirstUpper }}: {{ T "reportItemLatencyExplain" }},
    {{ T "reportItemDeltaLatency" | strings.FirstUpper }}: {{ T "reportItemDeltaLatencyExplain" }}.
  </caption>
  <thead>
    <tr>
      <th scope="col">{{ T "reportItemId" | strings.FirstUpper }}</th>
      <th scope="col">{{ T "reportItemText" | strings.FirstUpper }}</th>
      <th scope="col">{{ T "reportItemResponse" | strings.FirstUpper }}</th>
      <th scope="col" class="text-center">{{ T "reportItemLatency" | strings.FirstUpper }}</th>
      <th scope="col" class="text-center">{{ T "reportItemDeltaLatency" | strings.FirstUpper }}</th>
    </tr>
  </thead>
  <tbody>
    {{- $rows := first $first (after $after $specs.items) }}
    {{- range $itemIndex, $item := $rows }}
      {{- $itemNumber := add $itemIndex $after 1 }}
      {{- $splittedItemNumber := split ($itemNumber | string) "" }}
      {{- $itemId := slice "0" "0" "0" }}
      {{- $itemId = $itemId | append $splittedItemNumber | last 3 }}
      {{- $itemId = delimit $itemId "" }}
      <tr>
        <th scope="row">{{ $itemId }}</th>
        <td>{{- $item | safeHTML }}</td>
        <td>
          {{- $options := index $specs.options $itemIndex }}
          {{- range $options }}
            {{- range $optionValue, $optionText := . }}
              <span class="option option-{{ $optionValue }}-it-{{ $itemId }}#answerValue">{{ $optionText }}</span>
            {{- end }}
          {{- end }}
          <span class="option option-it-{{ $itemId }}#answerValue italic">{{ T "noResponse" }}</span>
        </td>
        <td class="text-center">it-{{ $itemId }}#answerLatency</td>
        <td class="text-center">it-{{ $itemId }}#deltaAnswerLatency</td>
      </tr>
    {{- end }}
  </tbody>
</table>